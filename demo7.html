<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			*{
				margin:0;
				padding:0;
			}
			#myCanvas{
				display:block;
				border:1px solid black;
				width:500px;
				height:500px;
				margin:100px auto 0;
			}
		</style>
	</head>
	<body>
		<canvas id="myCanvas" width="500" height="500"></canvas>
		<script>
			var myCanvas = document.getElementById("myCanvas");
//			获取canvas对象
			var ctx = myCanvas.getContext("2d");
			
//			绘制扇形 函数
			function drawSector(ctx,x,y,r,sa,ea,option){
				for(var i in option){
					if(i=="stroke"){
						ctx.strokeStyle = option[i];
						ctx.beginPath();
						ctx.moveTo(x,y);
						ctx.arc(x,y,r,sa,ea,false);
						ctx.closePath();
						ctx.stroke();
					}else if(i=="fill"){
						ctx.fillStyle = option[i];
						ctx.beginPath();
						ctx.moveTo(x,y);
						ctx.arc(x,y,r,sa,ea,false);
						ctx.closePath();
						ctx.fill();
					}else{
						console.log("option is error!");
					}
				}	
			}
			
//			转换百分比 函数
			function turnAngle(percent){
				return 2*Math.PI*percent/100;
			}
			
//			主函数
			function main(ctx,x,y,r,percent1,percent2,percent3){
				var per1 = turnAngle(percent1);
				var per2 = turnAngle(percent2);
				var per3 = turnAngle(percent3);
				
//				drawSector(ctx,x,y,r,0,per1,{"fill":"yellow"});
//				drawSector(ctx,x,y,r,per1,per1+per2,{"fill":"red"});
//				drawSector(ctx,x,y,r,per1+per2,per1+per2+per3,{"fill":"blue"});
				
//				初始步数为0
				var init = 0;
//				总共100步完成 整个运动
				var step = 100;
				var perStep1 = per1/100;
				var perStep2 = per2/100;
				var perStep3 = per3/100;
 				var time = setInterval(function(){
 					init++;
 					if(init>=100){
 						init = 100;
 						clearInterval(time);
 					}
 					var nowStep1 = init*perStep1;
 					var nowStep2 = init*perStep2;
 					var nowStep3 = init*perStep3;
   					ctx.clearRect(0,0,500,500);
					drawSector(ctx,x,y,r,0,nowStep1,{"fill":"rgba(255,0,0,0.1)"});
					drawSector(ctx,x,y,r,per1,per1+nowStep2,{"fill":"rgba(0,255,0,0.1)"});
					drawSector(ctx,x,y,r,per1+per2,per1+per2+nowStep3,{"fill":"rgba(0,0,255,0.1)"});
					if(init==100){
						var oX1 = 250 + 100*Math.cos(per1/2);
						var oY1 = 250 + 100*Math.sin(per1/2);
						var oX2 = 250 + 100*Math.cos(per1+per2/2);
						var oY2 = 250 + 100*Math.sin(per1+per2/2);
						var oX3 = 250 + 100*Math.cos(per1+per2+per3/2);
						var oY3 = 250 + 100*Math.sin(per1+per2+per3/2);
						
						ctx.fillStyle = "black";
						ctx.font = "16px";
						ctx.fillText(percent1+"%",oX1,oY1);
						ctx.fillText(percent2+"%",oX2,oY2);
						ctx.fillText(percent3+"%",oX3,oY3);
					}
				},1000/60);
			}
			
			main(ctx,250,250,200,14,75,11);
		</script>
	</body>
</html>
